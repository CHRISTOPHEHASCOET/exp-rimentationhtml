<!DOCTYPE html>
<html lang="fr">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>FLIGHT LOG // HALL DES DÉPARTS</title>

  <!-- Polices -->
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link
    href="https://fonts.googleapis.com/css2?family=JetBrains+Mono:wght@400;700&family=Rajdhani:wght@600;700&display=swap"
    rel="stylesheet">

  <!-- GSAP -->
  <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.2/gsap.min.js"></script>

  <style>
    /* =======================
       VARIABLES & BASE
    ======================= */
    :root {
      --clr-bg: #0a0d14;
      --clr-panel: #111820;
      --clr-accent: #1f6fea;
      --clr-accent-soft: #8ec5ff;
      --clr-text: #e6edf3;
      --clr-muted: #909aa7;
      --clr-green: #40b950;
      --font-mono: 'JetBrains Mono', monospace;
      --font-display: 'Rajdhani', sans-serif;

      --clr-bg: #0a0d14;
      --clr-panel: #111820;
      --clr-accent: #1f6fea;
      --clr-accent-soft: #8ec5ff;
      --clr-text: #e6edf3;
      --clr-muted: #909aa7;
      --clr-green: #40b950;
      --font-mono: 'JetBrains Mono', monospace;
      --font-display: 'Rajdhani', sans-serif;
    }

    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }

    body {
      background-color: var(--clr-bg);
      color: var(--clr-text);
      font-family: var(--font-display);
      -webkit-font-smoothing: antialiased;
      background: radial-gradient(circle at top, #1b3957 0, #050b10 52%, #020407 100%);
      min-height: 100vh;
      display: flex;
      flex-direction: column;
    }

    .wrapper {
      width: min(1200px, 100% - 32px);
      margin-inline: auto;
    }

    main {
      flex: 1;
      padding-block: 2rem;
    }

    /* =======================
       HEADER (Simplifié pour la démo)
    ======================= */
    header.site-header {
      padding: 2rem 0;
      border-bottom: 1px solid rgba(255, 255, 255, 0.1);
      text-align: center;
      font-size: 1.5rem;
      letter-spacing: 4px;
      text-transform: uppercase;
      font-family: var(--font-display);
    }

    header.site-header span {
      color: var(--clr-accent);
      font-weight: 700;
    }

    /* =======================
       CONTROLES & TABLEAU
    ======================= */
    .board-header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-bottom: 2rem;
      flex-wrap: wrap;
      gap: 1rem;
    }

    .controls-group {
      display: flex;
      border: 1px solid #2f588b;
      border-radius: 6px;
      overflow: hidden;
    }

    .btn-cockpit {
      background: transparent;
      border: none;
      color: var(--clr-muted);
      padding: 10px 30px;
      cursor: pointer;
      font-family: var(--font-mono);
      font-size: 0.9rem;
      text-transform: uppercase;
      transition: all 0.3s ease;
      border-right: 1px solid #2f588b;
    }

    .btn-cockpit:last-child {
      border-right: none;
    }

    .btn-cockpit.active {
      background: var(--clr-accent);
      color: white;
      box-shadow: 0 0 15px rgba(31, 111, 234, 0.4);
    }

    .board-subtitle {
      font-family: var(--font-mono);
      font-size: 0.9rem;
      color: var(--clr-muted);
    }

    /* Modification : Suppression du fond sombre pour le tableau */
    .terminal-screen {
      overflow-x: auto;
      /* Empêche l'écrasement du tableau sur mobile */
    }

    .flight-table {
      width: 100%;
      border-collapse: collapse;
      font-family: var(--font-mono);
      text-transform: uppercase;
      table-layout: fixed;
      /* Force le respect des largeurs de colonnes */
    }

    .flight-table th {
      color: var(--clr-accent);
      text-align: left;
      padding: 12px;
      font-size: 0.85rem;
      font-weight: 600;
      border-bottom: 2px solid rgba(142, 197, 255, 0.2);
    }

    .flight-table td {
      padding: 18px 12px;
      font-size: 0.9rem;
      color: var(--clr-text);
      border-bottom: 1px solid rgba(255, 255, 255, 0.08);
      white-space: nowrap;
      /* Empêche le texte de passer à la ligne */
      overflow: hidden;
      text-overflow: ellipsis;
      font-weight: 400;
    }

    .flight-table tr:last-child td {
      border-bottom: none;
    }

    .flight-table .code-cell {
      color: var(--clr-accent-soft);
      font-weight: 700;
    }

    .flight-table .status-cell {
      color: var(--clr-green);
    }

    /* =======================
   ÉCRAN TERMINAL (TABLEAU)
======================= */
    .terminal-screen {
      background: linear-gradient(180deg,
          rgba(255, 255, 255, 0.02),
          rgba(0, 0, 0, 0.15));
      border: 1px solid rgba(142, 197, 255, 0.25);
      box-shadow:
        inset 0 0 0 1px rgba(255, 255, 255, 0.04),
        0 30px 80px rgba(0, 0, 0, 0.6);
      padding: 1rem;
    }

    /* =======================
   TABLEAU AÉROPORT
======================= */
    .flight-table {
      background: transparent;
    }

    .flight-table thead th {
      border-right: 1px solid rgba(142, 197, 255, 0.15);
    }

    .flight-table thead th:last-child,
    .flight-table td:last-child {
      border-right: none;
    }

    .flight-table td {
      border-right: 1px solid rgba(255, 255, 255, 0.06);
    }

    /* =======================
   SPLIT-FLAP
======================= */
    .flap {
      width: 22px;
      height: 34px;
      perspective: 600px;
      display: inline-flex;
      justify-content: center;
      align-items: center;
    }

    .flap-inner {
      width: 100%;
      height: 100%;
      backface-visibility: hidden;
      transform-style: preserve-3d;
      display: flex;
      justify-content: center;
      align-items: center;
    }


    .flap.space {
      background: transparent;
      box-shadow: none;
    }

    /* Ligne cliquable plus “machine” */
    .flight-table tbody tr {
      cursor: pointer;
      transition: background 0.2s ease;
    }

    .flight-table tbody tr:hover {
      background: rgba(31, 111, 234, 0.08);
    }
  </style>
</head>

<body>

  <header class="site-header">
    Christophe Hascoët // <span>Commandant de Bord</span>
  </header>

  <main class="wrapper">
    <!-- Contrôles Cockpit -->
    <div class="board-header">
      <div class="controls-group" role="tablist">
        <button class="btn-cockpit active" data-board="departs" role="tab" aria-selected="true">Départs</button>
        <button class="btn-cockpit" data-board="arrivees" role="tab" aria-selected="false">Arrivées</button>
      </div>
      <p id="board-subtitle" class="board-subtitle">Tableau des départs — Compétences en montée</p>
    </div>

    <!-- Tableau principal (sans fond sombre) -->
    <div class="terminal-screen">
      <table class="flight-table" id="main-board">
        <thead>
          <tr>
            <th style="width: 10%;">VOL</th>
            <th style="width: 40%;">DESTINATION</th>
            <th style="width: 15%;">ETD</th>
            <th style="width: 10%;">GATE</th>
            <th style="width: 25%;">STATUS</th>
          </tr>
        </thead>
        <tbody id="board-body">
          <!-- Les lignes du tableau seront injectées ici par JavaScript -->
        </tbody>
      </table>
    </div>
  </main>


  <script>
    document.addEventListener("DOMContentLoaded", () => {
      const FLAP_CHARS = " ABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789/-";


      /* ======================
         DONNÉES DES TABLEAUX
      ====================== */
      const BOARDS = {
        departs: {
          subtitle: "Tableau des départs — Compétences en montée",
          label: "DESTINATION",
          timeLabel: "ETD",
          data: [
            { vol: "DEV01", loc: "TYPESCRIPT AVANCÉ", time: "--:--", gate: "A01", stat: "EN PRÉPARATION" },
            { vol: "DEV02", loc: "TESTS AUTOMATISÉS", time: "--:--", gate: "A02", stat: "EN CONFIGURATION" },
            { vol: "DEV03", loc: "ARCHITECTURE FRONT", time: "--:--", gate: "B01", stat: "EN MONTÉE" },
            { vol: "DEV04", loc: "PERFORMANCE WEB", time: "--:--", gate: "B02", stat: "EN APPROCHE" },
            { vol: "DEV05", loc: "GSAP AVANCÉ", time: "--:--", gate: "C01", stat: "PROCÉDURE EN COURS" }
          ]
        },
        arrivees: {
          subtitle: "Tableau des arrivées — Compétences maîtrisées",
          label: "PROVENANCE",
          timeLabel: "ATA",
          data: [
            { vol: "OPS01", loc: "HTML SÉMANTIQUE", time: "--:--", gate: "A", stat: "OPÉRATIONNEL" },
            { vol: "OPS02", loc: "CSS / SASS", time: "--:--", gate: "A", stat: "MAÎTRISE CONFIRMÉE" },
            { vol: "OPS03", loc: "JAVASCRIPT ES6+", time: "--:--", gate: "B", stat: "PROCÉDURE VALIDÉE" },
            { vol: "OPS04", loc: "ACCESSIBILITÉ", time: "--:--", gate: "B", stat: "AUTORISÉ AU SERVICE" },
            { vol: "OPS05", loc: "PHP / LARAVEL", time: "--:--", gate: "C", stat: "EN SERVICE ACTIF" },
            { vol: "OPS06", loc: "GIT / WORKFLOW", time: "--:--", gate: "C", stat: "CERTIFIÉ INTERNE" }
          ]
        }
      };

      function animateFlapsRealistic() {
        const flaps = document.querySelectorAll("#board-body .flap:not(.space)");

        flaps.forEach((flap, index) => {
          const inner = flap.querySelector(".flap-inner");
          const finalChar = inner.textContent;
          const iterations = 6 + Math.floor(Math.random() * 6);

          const chars = [];
          for (let i = 0; i < iterations - 1; i++) {
            chars.push(
              FLAP_CHARS[Math.floor(Math.random() * FLAP_CHARS.length)]
            );
          }
          chars.push(finalChar);

          const tl = gsap.timeline({
            delay: index * 0.01
          });

          chars.forEach(char => {
            tl.to(inner, {
              rotationX: -90,
              duration: 0.07,
              ease: "power1.in",
              onComplete: () => {
                inner.textContent = char;
              }
            }).to(inner, {
              rotationX: 0,
              duration: 0.07,
              ease: "power1.out"
            });
          });
        });
      }



      /* ======================
         UTILITAIRES DOM
      ====================== */
      const $ = (selector) => document.querySelector(selector);

      const boardBody = $("#board-body");
      const subtitle = $("#board-subtitle");
      const thLocation = $("#main-board thead th:nth-child(2)");
      const thTime = $("#main-board thead th:nth-child(3)");

      /* ======================
         SPLIT-FLAP
      ====================== */
      function createFlapText(text) {
        return [...text].map(char => {
          if (char === " ") {
            return `<span class="flap space"></span>`;
          }
          return `
      <span class="flap">
        <span class="flap-inner">${char}</span>
      </span>
    `;
        }).join("");
      }


      /* ======================
         RENDER TABLEAU
      ====================== */
      function renderBoard(type) {
        const board = BOARDS[type];

        // Labels
        subtitle.textContent = board.subtitle;
        thLocation.textContent = board.label;
        thTime.textContent = board.timeLabel;

        // Reset tableau
        boardBody.innerHTML = "";

        // Injection lignes
        board.data.forEach(item => {
          const row = document.createElement("tr");
          row.innerHTML = `
        <td class="code-cell">${item.vol}</td>
        <td class="flap-text">${createFlapText(item.loc)}</td>
        <td>${item.time}</td>
        <td>${item.gate}</td>
        <td class="status-cell">${item.stat}</td>
      `;
          boardBody.appendChild(row);
        });

        animateRows();
        animateFlapsRealistic();
      }

      /* ======================
         ANIMATIONS GSAP
      ====================== */
      function animateRows() {
        gsap.from("#board-body tr", {
          opacity: 0,
          y: 15,
          duration: 0.4,
          stagger: 0.08,
          ease: "power2.out"
        });
      }

      function animateFlaps() {
        gsap.fromTo(
          "#board-body .flap:not(.space)",
          { rotationX: -90, opacity: 0 },
          {
            rotationX: 0,
            opacity: 1,
            duration: 0.35,
            stagger: {
              each: 0.015,
              from: "random"
            },
            ease: "steps(6)"
          }
        );
      }

      /* ======================
         CONTROLES
      ====================== */
      document.querySelectorAll(".btn-cockpit").forEach(button => {
        button.addEventListener("click", () => {
          document.querySelectorAll(".btn-cockpit").forEach(b => b.classList.remove("active"));
          button.classList.add("active");
          renderBoard(button.dataset.board);
        });
      });

      /* ======================
         INIT
      ====================== */
      renderBoard("departs");

    });
  </script>


</body>

</html>