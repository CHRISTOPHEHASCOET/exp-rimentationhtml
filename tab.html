<!DOCTYPE html>
<html lang="fr">
<head>
  <meta charset="utf-8">
  <title>Flight Board Â· Portfolio</title>
  <meta name="viewport" content="width=device-width, initial-scale=1">

  <!-- Fonts -->
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=JetBrains+Mono:wght@700&family=Rajdhani:wght@600;700&display=swap" rel="stylesheet">

  <!-- GSAP -->
  <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.2/gsap.min.js" defer></script>

  <style>
    /* =====================
       VARIABLES
    ====================== */
    :root {
      --bg-main: radial-gradient(circle at top, #1b3957, #050b10 60%);
      --panel-bg: #050a12;
      --cell-bg: linear-gradient(180deg, #0e1520, #050a12);
      --blue: #1f6fea;
      --green: #40b950;
      --text-main: #e6edf3;
      --text-muted: #6b7280;
      --font-mono: 'JetBrains Mono', monospace;
      --font-ui: 'Rajdhani', sans-serif;
    }

    /* =====================
       BASE
    ====================== */
    body {
      margin: 0;
      min-height: 100vh;
      background: var(--bg-main);
      color: var(--text-main);
      font-family: var(--font-ui);
    }

    main {
      max-width: 1400px;
      margin: 0 auto;
      padding: 2rem;
    }

    h1 {
      font-size: 1.2rem;
      letter-spacing: 0.15em;
      color: var(--text-muted);
    }

    /* =====================
       TABLE WRAPPER (RESPONSIVE)
    ====================== */
    .table-wrapper {
      overflow-x: auto;
      padding-bottom: 1rem;
    }

    /* =====================
       TABLE
    ====================== */
    table {
      width: auto;
      border-collapse: separate;
      border-spacing: 0.5rem;
      min-width: 720px;
    }

    thead th {
      font-family: var(--font-mono);
      font-size: 0.7rem;
      letter-spacing: 0.2em;
      color: var(--text-muted);
      text-align: left;
    }

    tbody tr {
      cursor: pointer;
    }

    tbody tr:focus-visible {
      outline: 2px solid var(--blue);
      outline-offset: 4px;
    }

    td {
      background: var(--cell-bg);
      border: 1px solid rgba(255,255,255,0.08);
      border-radius: 6px;
      padding: 6px 8px;
    }

    /* =====================
       SPLIT FLAPS
    ====================== */
    .word {
      display: inline-flex;
      gap: 2px;
      white-space: nowrap;
    }

    .flap {
      width: 1.2rem;
      height: 1.7rem;
      line-height: 1.7rem;
      text-align: center;
      font-family: var(--font-mono);
      font-size: 1rem;
      background: linear-gradient(180deg, #151a22 50%, #0a0d14 50%);
      border-radius: 3px;
      border: 1px solid rgba(0,0,0,0.6);
      position: relative;
      user-select: none;
      font-variant-numeric: tabular-nums;
    }

    .flap::after {
      content: "";
      position: absolute;
      inset: 50% 0 auto 0;
      height: 1px;
      background: rgba(0,0,0,0.6);
    }

    .row-green .flap {
      color: var(--green);
      text-shadow: 0 0 6px rgba(64,185,80,0.6);
    }

    .row-blue .flap {
      color: var(--blue);
      text-shadow: 0 0 6px rgba(31,111,234,0.6);
    }

    /* =====================
       MEDIA QUERIES
    ====================== */
    @media (max-width: 768px) {
      main {
        padding: 1rem;
      }

      table {
        min-width: 640px;
      }
    }
  </style>
</head>

<body>

<main>
  <h1>FLIGHT BOARD</h1>

  <div class="table-wrapper">
    <table aria-label="Tableau des sections du portfolio">
      <thead>
        <tr>
          <th scope="col">VOL</th>
          <th scope="col">DESTINATION</th>
          <th scope="col">PORTE</th>
          <th scope="col">STATUT</th>
        </tr>
      </thead>
      <tbody id="flight-body"></tbody>
    </table>
  </div>
</main>

<script>
  const DATA = [
    { v: 'PT-987', d: 'ACCUEIL', g: 'T0', s: 'OUVERT', c: 'row-green', url: 'accueil.html' },
    { v: 'PJ-251', d: 'HALL DEPARTS', g: 'H1', s: 'EMBARQUEMENT', c: 'row-blue', url: 'depart.html' },
    { v: 'PK-365', d: 'PASSEPORT PILOTE', g: 'J2', s: "A L'HEURE", c: 'row-green', url: 'passeport.html' },
    { v: 'PT-987', d: 'ACCUEIL', g: 'T0', s: 'OUVERT', c: 'row-green', url: 'accueil.html' },
    { v: 'PJ-251', d: 'HALL DEPARTS', g: 'H1', s: 'EMBARQUEMENT', c: 'row-blue', url: 'depart.html' },
    { v: 'PK-365', d: 'PASSEPORT PILOTE', g: 'J2', s: "A L'HEURE", c: 'row-green', url: 'passeport.html' },
    { v: 'PT-987', d: 'ACCUEIL', g: 'T0', s: 'OUVERT', c: 'row-green', url: 'accueil.html' }
  ];

  const CHARS = " ABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789.'-";
  const tbody = document.getElementById('flight-body');

  function createWord(text, length) {
    return `<div class="word">${
      text.padEnd(length).split('').map(c =>
        `<span class="flap" data-char="${c}">${c === ' ' ? '&nbsp;' : c}</span>`
      ).join('')
    }</div>`;
  }

  DATA.forEach(row => {
    const tr = document.createElement('tr');
    tr.className = row.c;
    tr.tabIndex = 0;
    tr.setAttribute('role', 'link');
    tr.dataset.url = row.url;

    tr.innerHTML = `
      <td>${createWord(row.v, 6)}</td>
      <td>${createWord(row.d, 22)}</td>
      <td>${createWord(row.g, 3)}</td>
      <td>${createWord(row.s, 14)}</td>
    `;

    tr.addEventListener('click', () => location.href = row.url);
    tr.addEventListener('keydown', e => {
      if (e.key === 'Enter') location.href = row.url;
    });

    tbody.appendChild(tr);
  });

  function animateFlaps() {
    document.querySelectorAll('.flap').forEach(flap => {
      const finalChar = flap.dataset.char;
      if (finalChar === ' ') return;

      let count = 0;
      const max = 12 + Math.random() * 10;

      const interval = setInterval(() => {
        flap.textContent = CHARS[Math.floor(Math.random() * CHARS.length)];
        if (++count >= max) {
          clearInterval(interval);
          flap.textContent = finalChar;
          gsap.from(flap, { rotationX: -90, duration: 0.3 });
        }
      }, 40);
    });
  }

  window.addEventListener('load', animateFlaps);
</script>

</body>
</html>
