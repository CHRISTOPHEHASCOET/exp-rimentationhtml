<!doctype html>
<html lang="fr">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>Tableau Missions - Animation Portes</title>
<!-- Police condensée type "Aéroport" -->
<link rel="preconnect" href="https://fonts.googleapis.com">
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
<link href="https://fonts.googleapis.com/css2?family=Oswald:wght@400;600;700&display=swap" rel="stylesheet">

<!-- GSAP pour l'animation fluide -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.2/gsap.min.js"></script>

<style>
  :root {
    /* --- TES COULEURS --- */
    --bg-body: #05060a;
    --board-bg: #020308;
    --board-border: #1e293b;
    
    /* Couleurs des Tuiles */
    --tile-bg: #0A0E27;          /* Bleu Nuit */
    --tile-text: #ffffff;        /* Blanc */
    --tile-accent: #8B1E3F;      /* Rouge Rubis */
    
    /* Dimensions Tableau */
    --tile-w: 22px;
    --tile-h: 36px;
    --gap-char: 2px;
    
    /* Ta correction : espace réduit entre colonnes */
    --col-gap: 5px; 
  }

  * { box-sizing: border-box; margin: 0; padding: 0; }
  
  body {
    height: 100vh;
    background: var(--bg-body);
    font-family: 'Oswald', sans-serif;
    display: flex;
    align-items: center;
    justify-content: center;
    overflow: hidden; /* Important pour que les portes ne créent pas de scroll */
    color: var(--tile-text);
  }

  /* --- 1. LE TABLEAU (Caché derrière les portes au début) --- */
  .board-wrapper {
    width: 100%;
    max-width: 1250px;
    padding: 10px;
    z-index: 1; /* Derrière les portes */
  }

  .board {
    background: var(--board-bg);
    border: 6px solid var(--board-border);
    border-radius: 10px;
    box-shadow: 0 30px 60px rgba(0,0,0,0.9);
    display: flex;
    flex-direction: column;
    padding: 10px;
  }

  .row, .header-row {
    display: flex;
    align-items: center;
    gap: var(--col-gap);
    padding: 8px 5px;
  }
  
  .row { border-bottom: 1px solid rgba(255,255,255,0.05); }
  
  /* Largeurs colonnes */
  .c-vol  { width: 150px; flex-shrink: 0; }
  .c-dest { width: 530px; flex-shrink: 0; }
  .c-emb  { width: 130px; flex-shrink: 0; }
  .c-gate { width: 80px;  flex-shrink: 0; }
  .c-obs  { flex: 1; text-align: right; }

  /* En-têtes */
  .header-row {
    padding-bottom: 10px;
    margin-bottom: 5px;
    border-bottom: 2px solid var(--tile-accent);
  }
  .col-head {
    font-size: 14px;
    letter-spacing: 2px;
    color: var(--tile-accent);
    font-weight: 600;
    text-transform: uppercase;
    opacity: 0.9;
  }

  .split-word { display: flex; gap: var(--gap-char); }

  /* Tuiles */
  .flap {
    position: relative;
    width: var(--tile-w);
    height: var(--tile-h);
    background-color: var(--tile-bg);
    border-radius: 2px;
    color: var(--tile-text);
    font-size: 20px;
    font-weight: 600;
    line-height: var(--tile-h);
    text-align: center;
    box-shadow: inset 0 0 5px rgba(0,0,0,0.7);
  }

  .c-obs .flap { 
    color: var(--tile-accent);
    text-shadow: 0 0 5px rgba(139, 30, 63, 0.4);
  }

  .flap::before {
    content: ''; position: absolute; top: 0; left: 0; right: 0; height: 50%;
    background: linear-gradient(to bottom, rgba(255,255,255,0.1) 0%, rgba(255,255,255,0.0) 100%);
    border-bottom: 1px solid rgba(0,0,0,0.8);
    z-index: 2;
  }
  .char { display: block; }

  /* --- 2. LES PORTES (Overlay) --- */
  .doors-overlay {
    position: fixed;
    top: 0; left: 0; width: 100%; height: 100%;
    z-index: 999; /* Devant tout */
    display: flex;
    pointer-events: none; /* Une fois ouvertes, on peut cliquer au travers */
  }

  .door {
    flex: 1;
    height: 100%;
    background: linear-gradient(135deg, #080a10 0%, #121624 100%); /* Couleur sombre métallique */
    position: relative;
    display: flex;
    align-items: center;
    box-shadow: 0 0 50px rgba(0,0,0,0.8);
    border-right: 1px solid #1e293b; /* Ligne de séparation centrale */
  }
  
  .door.right {
    border-left: 1px solid #000;
    border-right: none;
    justify-content: flex-start; /* Poignée à gauche */
  }
  .door.left {
    justify-content: flex-end; /* Poignée à droite */
  }

  /* Texture subtile sur les portes (optionnel) */
  .door::after {
    content: ''; position: absolute; inset: 0;
    background-image: repeating-linear-gradient(45deg, rgba(255,255,255,0.01) 0px, rgba(255,255,255,0.01) 1px, transparent 1px, transparent 10px);
    opacity: 0.3;
  }

  /* --- 3. LES POIGNÉES ROUGES --- */
  .handle {
    width: 20px;
    height: 140px;
    background: linear-gradient(to bottom, #ff3b3b, var(--tile-accent)); /* Dégradé Rouge vif -> Rubis */
    border-radius: 10px;
    margin: 0 2px; /* Collées au centre */
    position: relative;
    box-shadow: 0 0 15px rgba(255, 59, 59, 0.4), inset 2px 2px 5px rgba(255,255,255,0.2);
    display: flex;
    flex-direction: column;
    justify-content: space-between;
    padding: 15px 0;
    align-items: center;
    z-index: 10;
  }

  /* Les deux petits points (boulons) */
  .dot {
    width: 8px;
    height: 8px;
    background-color: white;
    border-radius: 50%;
    box-shadow: 0 1px 3px rgba(0,0,0,0.5);
  }
  
  /* Pour le responsive mobile */
  @media (max-width: 1100px) {
    .board-wrapper { overflow-x: auto; }
    .board { min-width: 1000px; }
  }
</style>
</head>
<body>

<!-- LES PORTES -->
<div class="doors-overlay">
  <div class="door left">
    <div class="handle">
      <div class="dot"></div>
      <div class="dot"></div>
    </div>
  </div>
  <div class="door right">
    <div class="handle">
      <div class="dot"></div>
      <div class="dot"></div>
    </div>
  </div>
</div>

<!-- LE TABLEAU -->
<div class="board-wrapper">
  <div class="board">
    <div class="header-row">
      <div class="col-head c-vol">VOL</div>
      <div class="col-head c-dest">DESTINATION</div>
      <div class="col-head c-emb">HEURE</div>
      <div class="col-head c-gate">PORTE</div>
      <div class="col-head c-obs">OBSERVATIONS</div>
    </div>
    <div id="board-content"></div>
  </div>
</div>

<script>
/* DONNÉES */
const entries = [
  {vol:"CKW01", dest:"COOK'N WAY", time:"09:00", gate:"A4", stat:"TERMINE"},
  {vol:"CAMM02", dest:"CAMI COURSES EXPRESS", time:"10:10", gate:"B2", stat:"LIVRE"},
  {vol:"FKMM03", dest:"MOBILITE INCLUSIVE", time:"12:20", gate:"C3", stat:"VALIDE"},
  {vol:"HDRR10", dest:"CHEF DE PROJET AGILE", time:"06:30", gate:"D1", stat:"ACTIF"},
  {vol:"DEVV21", dest:"DEVELOPPEMENT WEB", time:"16:40", gate:"A1", stat:"OPERATIONNEL"},
  {vol:"SEOO88", dest:"SEO / ACCESSIBILITE", time:"02:50", gate:"B4", stat:"100%"},
  {vol:"JSS108", dest:"JAVASCRIPT", time:"12:00", gate:"C2", stat:"EN COURS"},
  {vol:"APII42", dest:"BACKEND / API", time:"22:10", gate:"D3", stat:"DEPLOYE"},
  {vol:"404ERR", dest:"DEBUGGING SYSTEM", time:"--:--", gate:"X0", stat:"RESOLU"}
];

/* Config */
const SLOTS = { vol: 6, dest: 22, time: 5, gate: 3, stat: 12 };
const CHARS = "ABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789:/-' ";

/* Génération HTML */
function createWord(text, count, cssClass) {
  let html = `<div class="split-word ${cssClass}">`;
  const safeText = (text || "").toUpperCase();
  for (let i = 0; i < count; i++) {
    const char = safeText[i] || " "; 
    html += `<div class="flap" data-char="${char}"><span class="char"> </span></div>`;
  }
  html += `</div>`;
  return html;
}

const boardEl = document.getElementById('board-content');
entries.forEach(item => {
  const row = document.createElement('div');
  row.className = 'row';
  row.innerHTML = `
    ${createWord(item.vol, SLOTS.vol, 'c-vol')}
    ${createWord(item.dest, SLOTS.dest, 'c-dest')}
    ${createWord(item.time, SLOTS.time, 'c-emb')}
    ${createWord(item.gate, SLOTS.gate, 'c-gate')}
    ${createWord(item.stat, SLOTS.stat, 'c-obs')}
  `;
  boardEl.appendChild(row);
});

/* --- ANIMATION SÉQUENTIELLE --- */
window.onload = () => {
  
  const tl = gsap.timeline();

  // 1. Animation des portes
  tl.to(".handle", { scale: 1.1, duration: 0.2, yoyo: true, repeat: 1 }) // Petit effet "clic" sur les poignées
    .to(".door.left", { x: "-100%", duration: 1.5, ease: "power3.inOut" }, "+=0.1")
    .to(".door.right", { x: "100%", duration: 1.5, ease: "power3.inOut" }, "<") // "<" signifie "en même temps que le précédent"
    
    // 2. Lancement du tableau (pendant que les portes finissent de s'ouvrir)
    .call(startBoardAnimation, null, "-=1.0"); 
};

function startBoardAnimation() {
  const allFlaps = document.querySelectorAll('.flap');
  
  allFlaps.forEach((flap) => {
    const target = flap.getAttribute('data-char');
    const span = flap.querySelector('.char');
    const delay = Math.random() * 0.5; // Délai aléatoire
    
    setTimeout(() => {
      let cycles = 0;
      const maxCycles = 6 + Math.floor(Math.random() * 12);
      
      const interval = setInterval(() => {
        span.textContent = CHARS[Math.floor(Math.random() * CHARS.length)];
        cycles++;
        if (cycles >= maxCycles) {
          clearInterval(interval);
          span.textContent = target;
          // Petit flash blanc sur la bordure pour l'effet mécanique
          flap.style.borderColor = "rgba(255,255,255,0.3)";
          setTimeout(() => flap.style.borderColor = "transparent", 200);
        }
      }, 50); // Vitesse
    }, delay * 1000);
  });
}
</script>
</body>
</html>